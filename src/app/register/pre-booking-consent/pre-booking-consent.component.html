<div class="login-page">
  <div class="container">
    <div class="row">
      <div class="d-flex justify-content-center">
        <div class="login">
          <div class="box" [ngClass]="{'increse-width':isTokenValid}">
            <div class="d-block p-4">
              <div class="text-center">
                <img src="https://master.d318lr8s05o159.amplifyapp.com/assets/images/comein_logo.png" alt="ComeinLogo">
              </div>
              <div class="text-center m-3">
                <!-- <h4>Create Account</h4> -->
                <div class="p-2 personal-info">
                  <div>
                    <h6 *ngIf="!isTokenValid">Please enter security code</h6>
                    <h6 *ngIf="isTokenValid">Accept consent infomation</h6>
                  </div>
                  <div class="row" *ngIf="!isTokenValid">
                    <div class="col-md-12">
                      <mat-form-field>
                        <input type="text" [formControl]="code" matInput placeholder="Security code">
                      </mat-form-field>
                    </div>
                  </div>
                  <div class="text-center" *ngIf="!isTokenValid">
                    <button mat-button mat-raised-button [disabled]="!code.valid" (click)="submit()"
                      type="button">Next</button>
                  </div>

                  <div class="card card-pdpa p-4 m-3" *ngIf="visitor && isTokenValid && !isSuccess">
                    <div class="row">
                      <div class="col-md-8">
                        <p class="text-start"><span class="card-label">Card: </span> {{ visitor.idNo || '-' }}</p>
                        <p class="text-start"><span class="card-label">Firstname: </span> {{ visitor.firstName || '-'  }}</p>
                        <p class="text-start"><span class="card-label">Lastname: </span> {{ visitor.lastName || '-'  }}</p>
                        <p class="text-start"><span class="card-label">Birthdate: </span> {{ visitor.birthDate | date: 'dd/MM/yyyy'}}</p>
                        <p class="text-start"><span class="card-label">Status: </span> {{ visitor.status || '-'  }}</p>
                      </div>
                      <div class="col-md-4">
                        <img src="https://via.placeholder.com/150x180" alt="">
                      </div>
                    </div>
                    <hr>
                    <div class="row">
                      <div class="col-md-6">
                        <p class="text-start"><span class="card-label">Issue date: </span> {{ visitor.issueDate | date: 'dd/MM/yyyy' }}</p>
                      </div>
                      <div class="col-md-6">
                          <p class="text-end"><span class="card-label">Expire date: </span> {{ visitor.expireDate | date: 'dd/MM/yyyy' }}</p>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-md-6">
                        <p class="text-start"><span class="card-label">Ref: </span> {{ visitor.referenceName }}</p>
                      </div>

                    </div>
                    <h4 class="text-center" *ngIf="visitor.status === 'Confirm'">Already confirmed.</h4>
                    <div class="d-flex" *ngIf="visitor.status !== 'Confirm'">
                      <div class="p-1">
                        <mat-checkbox [formControl]="accept"></mat-checkbox>
                      </div>
                      <div class="text-start">
                        I agree to Comein's storage and processing of my personal data. <span class="term-button"
                          (click)="viewTerm()">Term & condition</span>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-4"></div>
                      <div class="col-4">
                        <div class="text-center" *ngIf="isTokenValid && visitor.status !== 'Confirm'">
                          <button 
                            mat-button 
                            mat-raised-button
                            color="primary" 
                            [disabled]="!accept.valid" (click)="success()"
                            type="button">Confirm</button>
                        </div>
                      </div>
                    </div>
                  </div>

                  <h4 *ngIf="isSuccess" class="text-center">
                    Success  
                  </h4>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>